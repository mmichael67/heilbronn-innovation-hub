import{c as je,R as x,b as H,g as we,r as g,j as r,B as re,m as I,P as ke,a as Pe,d as Ne}from"./index-qnuclku8.js";import{g as _,I as F,o as B,O as Ae,L as U,i as Oe,j as V,k as Se,r as Re,G as Ce,m as ae,P as Ee,q as ie,t as $e,K as Le,S as q,M as G,C as L,R as Z,T as X,A as Te,a as oe,X as se,Y as le,b as ze,B as Ie,d as ce,c as _e}from"./AreaChart-CLTVbRI-.js";import{L as O}from"./leaflet-Bwq7_ZlS.js";import{E as Me,R as Fe,M as De,a as Ke}from"./rotate-ccw-CQxNutvg.js";import{C as We}from"./circle-check-big-CrEGdE9o.js";import{C as Be}from"./clock-h4td6Qn0.js";import{d as Ve,b as ye,c as he,L as qe,P as Ge,a as Ze}from"./PieChart-ULsWKk32.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=je("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var Xe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function D(t){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(t)}function Ye(t,e){if(t==null)return{};var a=He(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function He(t,e){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;a[n]=t[n]}return a}function E(){return E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},E.apply(this,arguments)}function ue(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,n)}return a}function K(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ue(Object(a),!0).forEach(function(n){Qe(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Qe(t,e,a){return e=Je(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Je(t){var e=Ue(t,"string");return D(e)=="symbol"?e:e+""}function Ue(t,e){if(D(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e||"default");if(D(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var et=function(e,a,n,i){var s="";return i.forEach(function(l,d){var m=F(a,n,e,l);d?s+="L ".concat(m.x,",").concat(m.y):s+="M ".concat(m.x,",").concat(m.y)}),s+="Z",s},tt=function(e){var a=e.cx,n=e.cy,i=e.innerRadius,s=e.outerRadius,l=e.polarAngles,d=e.radialLines;if(!l||!l.length||!d)return null;var m=K({stroke:"#ccc"},_(e,!1));return x.createElement("g",{className:"recharts-polar-grid-angle"},l.map(function(f){var o=F(a,n,i,f),c=F(a,n,s,f);return x.createElement("line",E({},m,{key:"line-".concat(f),x1:o.x,y1:o.y,x2:c.x,y2:c.y}))}))},rt=function(e){var a=e.cx,n=e.cy,i=e.radius,s=e.index,l=K(K({stroke:"#ccc"},_(e,!1)),{},{fill:"none"});return x.createElement("circle",E({},l,{className:H("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(s),cx:a,cy:n,r:i}))},nt=function(e){var a=e.radius,n=e.index,i=K(K({stroke:"#ccc"},_(e,!1)),{},{fill:"none"});return x.createElement("path",E({},i,{className:H("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:et(a,e.cx,e.cy,e.polarAngles)}))},at=function(e){var a=e.polarRadius,n=e.gridType;return!a||!a.length?null:x.createElement("g",{className:"recharts-polar-grid-concentric"},a.map(function(i,s){var l=s;return n==="circle"?x.createElement(rt,E({key:l},e,{radius:i,index:s})):x.createElement(nt,E({key:l},e,{radius:i,index:s}))}))},ve=function(e){var a=e.cx,n=a===void 0?0:a,i=e.cy,s=i===void 0?0:i,l=e.innerRadius,d=l===void 0?0:l,m=e.outerRadius,f=m===void 0?0:m,o=e.gridType,c=o===void 0?"polygon":o,v=e.radialLines,w=v===void 0?!0:v,N=Ye(e,Xe);return f<=0?null:x.createElement("g",{className:"recharts-polar-grid"},x.createElement(tt,E({cx:n,cy:s,innerRadius:d,outerRadius:f,gridType:c,radialLines:w},N)),x.createElement(at,E({cx:n,cy:s,innerRadius:d,outerRadius:f,gridType:c,radialLines:w},N)))};ve.displayName="PolarGrid";function it(t){return t&&t.length?t[0]:void 0}var ot=it,st=ot;const lt=we(st);var ct=["key"];function M(t){"@babel/helpers - typeof";return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(t)}function dt(t,e){if(t==null)return{};var a=ut(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function ut(t,e){if(t==null)return{};var a={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;a[n]=t[n]}return a}function Q(){return Q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Q.apply(this,arguments)}function pe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,n)}return a}function P(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?pe(Object(a),!0).forEach(function(n){C(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function me(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xe(n.key),n)}}function mt(t,e,a){return e&&me(t.prototype,e),a&&me(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function ft(t,e,a){return e=J(e),yt(t,ge()?Reflect.construct(e,a||[],J(t).constructor):e.apply(t,a))}function yt(t,e){if(e&&(M(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ht(t)}function ht(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ge(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ge=function(){return!!t})()}function J(t){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},J(t)}function vt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ne(t,e)}function ne(t,e){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ne(t,e)}function C(t,e,a){return e=xe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function xe(t){var e=gt(t,"string");return M(e)=="symbol"?e:e+""}function gt(t,e){if(M(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e||"default");if(M(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W=function(t){function e(){var a;pt(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return a=ft(this,e,[].concat(i)),C(a,"state",{isAnimationFinished:!1}),C(a,"handleAnimationEnd",function(){var l=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),B(l)&&l()}),C(a,"handleAnimationStart",function(){var l=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),B(l)&&l()}),C(a,"handleMouseEnter",function(l){var d=a.props.onMouseEnter;d&&d(a.props,l)}),C(a,"handleMouseLeave",function(l){var d=a.props.onMouseLeave;d&&d(a.props,l)}),a}return vt(e,t),mt(e,[{key:"renderDots",value:function(n){var i=this.props,s=i.dot,l=i.dataKey,d=_(this.props,!1),m=_(s,!0),f=n.map(function(o,c){var v=P(P(P({key:"dot-".concat(c),r:3},d),m),{},{dataKey:l,cx:o.x,cy:o.y,index:c,payload:o});return e.renderDotItem(s,v)});return x.createElement(U,{className:"recharts-radar-dots"},f)}},{key:"renderPolygonStatically",value:function(n){var i=this.props,s=i.shape,l=i.dot,d=i.isRange,m=i.baseLinePoints,f=i.connectNulls,o;return x.isValidElement(s)?o=x.cloneElement(s,P(P({},this.props),{},{points:n})):B(s)?o=s(P(P({},this.props),{},{points:n})):o=x.createElement(Ve,Q({},_(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:d?m:null,connectNulls:f})),x.createElement(U,{className:"recharts-radar-polygon"},o,l?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,i=this.props,s=i.points,l=i.isAnimationActive,d=i.animationBegin,m=i.animationDuration,f=i.animationEasing,o=i.animationId,c=this.state.prevPoints;return x.createElement(Oe,{begin:d,duration:m,isActive:l,easing:f,from:{t:0},to:{t:1},key:"radar-".concat(o),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var w=v.t,N=c&&c.length/s.length,b=s.map(function(j,T){var $=c&&c[Math.floor(T*N)];if($){var p=V($.x,j.x),u=V($.y,j.y);return P(P({},j),{},{x:p(w),y:u(w)})}var k=V(j.cx,j.x),y=V(j.cy,j.y);return P(P({},j),{},{x:k(w),y:y(w)})});return n.renderPolygonStatically(b)})}},{key:"renderPolygon",value:function(){var n=this.props,i=n.points,s=n.isAnimationActive,l=n.isRange,d=this.state.prevPoints;return s&&i&&i.length&&!l&&(!d||!Se(d,i))?this.renderPolygonWithAnimation():this.renderPolygonStatically(i)}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.className,l=n.points,d=n.isAnimationActive;if(i||!l||!l.length)return null;var m=this.state.isAnimationFinished,f=H("recharts-radar",s);return x.createElement(U,{className:f},this.renderPolygon(),(!d||m)&&Re.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,i){var s;if(x.isValidElement(n))s=x.cloneElement(n,i);else if(B(n))s=n(i);else{var l=i.key,d=dt(i,ct);s=x.createElement(Ae,Q({},d,{key:l,className:H("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return s}}])}(g.PureComponent);C(W,"displayName","Radar");C(W,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Ce.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});C(W,"getComposedData",function(t){var e=t.radiusAxis,a=t.angleAxis,n=t.displayedData,i=t.dataKey,s=t.bandSize,l=a.cx,d=a.cy,m=!1,f=[],o=a.type!=="number"?s??0:0;n.forEach(function(v,w){var N=ae(v,a.dataKey,w),b=ae(v,i),j=a.scale(N)+o,T=Array.isArray(b)?Ee(b):b,$=ie(T)?void 0:e.scale(T);Array.isArray(b)&&b.length>=2&&(m=!0),f.push(P(P({},F(l,d,$,j)),{},{name:N,value:b,cx:l,cy:d,radius:$,angle:j,payload:v}))});var c=[];return m&&f.forEach(function(v){if(Array.isArray(v.value)){var w=lt(v.value),N=ie(w)?void 0:e.scale(w);c.push(P(P({},v),{},{radius:N},F(l,d,N,v.angle)))}else c.push(v)}),{points:f,isRange:m,baseLinePoints:c}});var xt=$e({chartName:"RadarChart",GraphicalChild:W,axisComponents:[{axisType:"angleAxis",AxisComp:ye},{axisType:"radiusAxis",AxisComp:he}],formatAxisMap:Le,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const be={supplier:"#22c55e",warehouse:"#3b82f6",factory:"#f97316",distribution:"#8b5cf6",customer:"#ec4899"},bt={supplier:"üì¶",warehouse:"üè≠",factory:"‚öôÔ∏è",distribution:"üöõ",customer:"üè™"};function jt(t,e){const a=be[t],n=bt[t],i=e?48:40;return O.divIcon({className:"supply-node-marker",html:`
      <div style="
        width: ${i}px;
        height: ${i}px;
        background: linear-gradient(135deg, ${a} 0%, ${a}dd 100%);
        border-radius: 12px;
        border: 3px solid rgba(255,255,255,0.95);
        box-shadow: 0 6px 20px ${a}50, 0 0 ${e?"30":"15"}px ${a}${e?"80":"40"};
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: ${i*.45}px;
        transition: all 0.3s ease;
        ${e?"animation: nodePulse 1.5s ease-in-out infinite;":""}
      ">${n}</div>
      ${e?`
        <style>
          @keyframes nodePulse {
            0%, 100% { transform: scale(1); box-shadow: 0 6px 20px ${a}50, 0 0 30px ${a}80; }
            50% { transform: scale(1.15); box-shadow: 0 8px 25px ${a}70, 0 0 40px ${a}aa; }
          }
        </style>
      `:""}
    `,iconSize:[i,i],iconAnchor:[i/2,i/2]})}function wt(t){return O.divIcon({className:"vehicle-marker",html:`
      <div style="
        width: 32px;
        height: 32px;
        background: linear-gradient(135deg, ${t} 0%, ${t}dd 100%);
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 4px 14px rgba(0,0,0,0.5), 0 0 10px ${t}60;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
      ">üöö</div>
    `,iconSize:[32,32],iconAnchor:[16,16]})}function fe(t){switch(t){case"active":return"#22c55e";case"delayed":return"#f59e0b";case"blocked":return"#ef4444";default:return"#64748b"}}function kt({center:t,zoom:e,className:a,nodes:n,flows:i,isSimulating:s,currentStepNodeId:l,onSelectNode:d}){const m=g.useRef(null),f=g.useRef(null),o=g.useRef(null),c=g.useRef({}),[v,w]=g.useState(!1),N=g.useRef(new Map),b=g.useRef(),j=g.useRef(d);g.useEffect(()=>{j.current=d},[d]);const T=g.useCallback(()=>{var p,u,k;m.current&&(document.fullscreenElement?(k=document.exitFullscreen)==null||k.call(document).then(()=>{w(!1),setTimeout(()=>{var y;return(y=o.current)==null?void 0:y.invalidateSize()},100)}):(u=(p=m.current).requestFullscreen)==null||u.call(p).then(()=>{w(!0),setTimeout(()=>{var y;return(y=o.current)==null?void 0:y.invalidateSize()},100)}).catch(console.error))},[]),$=g.useCallback(()=>{var p;(p=o.current)==null||p.setView(t,e)},[t,e]);return g.useEffect(()=>{if(!f.current||o.current)return;const p=O.map(f.current,{zoomControl:!1,attributionControl:!1});return o.current=p,p.setView(t,e),O.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{maxZoom:19}).addTo(p),c.current.flows=O.layerGroup().addTo(p),c.current.vehicles=O.layerGroup().addTo(p),c.current.nodes=O.layerGroup().addTo(p),setTimeout(()=>p.invalidateSize(),50),()=>{b.current&&cancelAnimationFrame(b.current),p.remove(),o.current=null}},[t,e]),g.useEffect(()=>{const p=c.current.flows;if(!(!o.current||!p)){p.clearLayers();for(const u of i){const k=n.find(R=>R.id===u.from),y=n.find(R=>R.id===u.to);if(!k||!y)continue;const A=fe(u.status),h=[[k.lat,k.lng],[y.lat,y.lng]];O.polyline(h,{color:A,weight:10,opacity:.2,lineCap:"round"}).addTo(p);const z=O.polyline(h,{color:A,weight:4,opacity:.8,dashArray:u.status==="active"?void 0:"10 6",lineCap:"round"});z.bindPopup(`
        <div style="font-size:13px; min-width:180px; padding: 4px;">
          <div style="font-weight:700; margin-bottom:8px; color: ${A};">Materialfluss</div>
          <div style="display:flex; gap:8px; margin-bottom:4px;">
            <span style="color:#64748b;">Von:</span>
            <span style="font-weight:500;">${k.name.split(" ")[0]}</span>
          </div>
          <div style="display:flex; gap:8px; margin-bottom:4px;">
            <span style="color:#64748b;">Nach:</span>
            <span style="font-weight:500;">${y.name.split(" ")[0]}</span>
          </div>
          <div style="display:flex; gap:8px; margin-bottom:4px;">
            <span style="color:#64748b;">Volumen:</span>
            <span style="font-weight:500;">${u.volume} Einheiten</span>
          </div>
          <div style="display:flex; gap:8px;">
            <span style="color:#64748b;">Status:</span>
            <span style="font-weight:500; text-transform:capitalize; color: ${A};">${u.status==="active"?"Aktiv":u.status==="delayed"?"Verz√∂gert":"Blockiert"}</span>
          </div>
        </div>
      `,{className:"custom-popup"}),z.addTo(p)}}},[n,i]),g.useEffect(()=>{const p=c.current.vehicles;if(!o.current||!p)return;if(p.clearLayers(),N.current.clear(),!s){b.current&&cancelAnimationFrame(b.current);return}i.filter(y=>y.status==="active").forEach((y,A)=>{const h=n.find(R=>R.id===y.from),S=n.find(R=>R.id===y.to);if(!h||!S)return;const z=O.marker([h.lat,h.lng],{icon:wt(fe(y.status)),zIndexOffset:1e3}).addTo(p);N.current.set(`${y.from}-${y.to}`,{position:Math.random(),marker:z,from:[h.lat,h.lng],to:[S.lat,S.lng]})});let u=0;const k=y=>{const A=y-u;u=y,N.current.forEach(h=>{h.position+=A*2e-4,h.position>=1&&(h.position=0);const S=h.position,z=h.from[0]+(h.to[0]-h.from[0])*S,R=h.from[1]+(h.to[1]-h.from[1])*S;h.marker.setLatLng([z,R])}),b.current=requestAnimationFrame(k)};return b.current=requestAnimationFrame(k),()=>{b.current&&cancelAnimationFrame(b.current)}},[s,i,n]),g.useEffect(()=>{const p=c.current.nodes;if(!(!o.current||!p)){p.clearLayers();for(const u of n){const k=l===u.id,y=jt(u.type,k),A=O.marker([u.lat,u.lng],{icon:y,zIndexOffset:k?1e3:0}),h=u.inventory>80?"#22c55e":u.inventory>50?"#f59e0b":"#ef4444";A.bindPopup(`
        <div style="font-size:13px; min-width:200px; padding: 4px;">
          <div style="font-weight:700; margin-bottom:8px; color: ${be[u.type]};">${u.name}</div>
          <div style="display:flex; gap:8px; margin-bottom:4px;">
            <span style="color:#64748b;">Typ:</span>
            <span style="font-weight:500; text-transform:capitalize;">${u.type==="supplier"?"Lieferant":u.type==="warehouse"?"Lager":u.type==="factory"?"Fabrik":u.type==="distribution"?"Vertrieb":"Kunde"}</span>
          </div>
          ${u.type!=="customer"?`
            <div style="margin-top:8px;">
              <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                <span style="color:#64748b;">Bestandsniveau</span>
                <span style="font-weight:600; color: ${h};">${u.inventory}%</span>
              </div>
              <div style="background:#1e293b; border-radius:4px; height:8px; overflow:hidden;">
                <div style="background: linear-gradient(90deg, ${h}, ${h}dd); height:100%; width:${u.inventory}%; border-radius:4px;"></div>
              </div>
            </div>
          `:""}
        </div>
      `,{className:"custom-popup"}),A.on("click",()=>{var S;(S=j.current)==null||S.call(j,u.id)}),A.addTo(p)}}},[n,l]),r.jsxs("div",{ref:m,className:`relative rounded-xl border-2 border-border overflow-hidden ${v?"fixed inset-0 z-50":""}`,style:{height:v?"100vh":"100%"},children:[r.jsxs("div",{className:"absolute top-0 left-0 right-0 z-[1000] flex items-center justify-between px-4 py-3 bg-card/90 backdrop-blur-sm border-b border-border",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Me,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium text-sm",children:"Lieferketten-Netzwerk"}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"‚Ä¢ Echtzeit-Materialfluss"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Ansicht zur√ºcksetzen",onClick:$,children:r.jsx(Fe,{className:"h-4 w-4"})}),r.jsx(re,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Vollbild",onClick:T,children:v?r.jsx(De,{className:"h-4 w-4"}):r.jsx(Ke,{className:"h-4 w-4"})})]})]}),r.jsx("div",{ref:f,className:`w-full ${a||""}`,style:{height:v?"calc(100vh - 52px)":"calc(100% - 52px)",marginTop:"52px"}})]})}const Pt=[{id:"supplier-1",name:"Stahl Lieferant (Stuttgart)",lat:48.7758,lng:9.1829,type:"supplier",inventory:85},{id:"supplier-2",name:"Elektronik (M√ºnchen)",lat:48.1351,lng:11.582,type:"supplier",inventory:92},{id:"supplier-3",name:"Kunststoffe (Frankfurt)",lat:50.1109,lng:8.6821,type:"supplier",inventory:78},{id:"supplier-4",name:"Aluminium (Karlsruhe)",lat:49.0069,lng:8.4037,type:"supplier",inventory:88},{id:"warehouse-1",name:"Zentrallager Heilbronn",lat:49.1427,lng:9.2109,type:"warehouse",inventory:88},{id:"warehouse-2",name:"Regionallager Mannheim",lat:49.4875,lng:8.466,type:"warehouse",inventory:75},{id:"factory-1",name:"Produktionswerk Heilbronn",lat:49.15,lng:9.22,type:"factory",inventory:72},{id:"dc-1",name:"Vertriebszentrum Nord",lat:49.2333,lng:9.3167,type:"distribution",inventory:65},{id:"dc-2",name:"Vertriebszentrum S√ºd",lat:48.8582,lng:9.2,type:"distribution",inventory:70},{id:"customer-1",name:"Einzelhandelsnetzwerk",lat:49.45,lng:8.65,type:"customer",inventory:0}],Nt=[{from:"supplier-1",to:"warehouse-1",volume:450,status:"active"},{from:"supplier-2",to:"warehouse-1",volume:280,status:"active"},{from:"supplier-3",to:"warehouse-1",volume:320,status:"delayed"},{from:"supplier-4",to:"warehouse-2",volume:380,status:"active"},{from:"warehouse-1",to:"factory-1",volume:850,status:"active"},{from:"warehouse-2",to:"factory-1",volume:420,status:"active"},{from:"factory-1",to:"dc-1",volume:620,status:"active"},{from:"factory-1",to:"dc-2",volume:480,status:"active"},{from:"dc-1",to:"customer-1",volume:580,status:"active"},{from:"dc-2",to:"customer-1",volume:440,status:"active"}],At=[{name:"Rohmaterialien",current:8540,min:5e3,max:12e3,reorderPoint:6e3,status:"optimal"},{name:"Komponenten",current:4200,min:2e3,max:8e3,reorderPoint:3e3,status:"optimal"},{name:"Halbfabrikate",current:1850,min:500,max:3e3,reorderPoint:800,status:"optimal"},{name:"Fertigprodukte",current:2100,min:1500,max:5e3,reorderPoint:2e3,status:"low"}],Ot=[{week:"W1",actual:1450,predicted:1420,confidence:95},{week:"W2",actual:1580,predicted:1550,confidence:93},{week:"W3",actual:1320,predicted:1380,confidence:91},{week:"W4",actual:1680,predicted:1620,confidence:94},{week:"W5",actual:null,predicted:1720,confidence:88},{week:"W6",actual:null,predicted:1850,confidence:82},{week:"W7",actual:null,predicted:1780,confidence:76},{week:"W8",actual:null,predicted:1650,confidence:70}],St=[{supplier:"Stahl Lieferant",onTime:94,quality:98,leadTime:5,risk:"low"},{supplier:"Elektronik",onTime:97,quality:99,leadTime:7,risk:"low"},{supplier:"Kunststoffe",onTime:82,quality:95,leadTime:4,risk:"medium"},{supplier:"Aluminium",onTime:91,quality:97,leadTime:3,risk:"low"}],ee=[{step:1,description:"Rohmaterialien werden aus Stuttgart versandt",node:"supplier-1"},{step:2,description:"Elektronik wird aus M√ºnchen versendet",node:"supplier-2"},{step:3,description:"Materialien erreichen das Zentrallager",node:"warehouse-1"},{step:4,description:"Produktion im Heilbronner Werk beginnt",node:"factory-1"},{step:5,description:"Fertigprodukte zum Vertriebszentrum Nord",node:"dc-1"},{step:6,description:"Produkte an das Einzelhandelsnetzwerk geliefert",node:"customer-1"}],Y=[{id:1,type:"delay",source:"Plastics Supplier",impact:"Medium",eta:"2 days delay",action:"Re-route via alternate supplier"},{id:2,type:"shortage",source:"Component B7",impact:"Low",eta:"5 days",action:"Safety stock activated"}],te=[{category:"Transportation",value:125e3,percentage:28,color:"#3b82f6"},{category:"Warehousing",value:98e3,percentage:22,color:"#22c55e"},{category:"Procurement",value:156e3,percentage:35,color:"#f97316"},{category:"Handling",value:45e3,percentage:10,color:"#8b5cf6"},{category:"Other",value:22e3,percentage:5,color:"#64748b"}],Rt=[{kpi:"Delivery",value:94,fullMark:100},{kpi:"Quality",value:97,fullMark:100},{kpi:"Lead Time",value:88,fullMark:100},{kpi:"Cost",value:82,fullMark:100},{kpi:"Flexibility",value:78,fullMark:100},{kpi:"Visibility",value:91,fullMark:100}],Ct=[{month:"Aug",inbound:4200,outbound:3900,turnover:4.2},{month:"Sep",inbound:4500,outbound:4200,turnover:4.5},{month:"Oct",inbound:4100,outbound:4300,turnover:4.8},{month:"Nov",inbound:4800,outbound:4500,turnover:4.3},{month:"Dec",inbound:5200,outbound:4800,turnover:4.1},{month:"Jan",inbound:4600,outbound:4400,turnover:4.6}];function Mt(){var m,f;const[t,e]=g.useState(!1),[a,n]=g.useState(0),[i,s]=g.useState(null);return g.useEffect(()=>{if(!t)return;const o=setInterval(()=>{n(c=>(c+1)%ee.length)},2e3);return()=>clearInterval(o)},[t]),r.jsxs("div",{className:"space-y-6 p-4 lg:p-6",children:[r.jsxs(I.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"AI Supply Chain Analytics"}),r.jsx("p",{className:"text-muted-foreground",children:"End-to-end visibility with predictive optimization"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(re,{variant:t?"secondary":"default",size:"sm",onClick:()=>e(!t),className:"gap-2",children:[t?r.jsx(ke,{className:"h-4 w-4"}):r.jsx(Pe,{className:"h-4 w-4"}),t?"Pause":"Simulate Flow"]}),Y.length>0&&r.jsx(q,{status:"warning",label:`${Y.length} Alerts`})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(G,{title:"Inventory Value",value:`‚Ç¨${(245e4/1e6).toFixed(2)}M`,subtitle:"Across all locations",icon:Ne,iconColor:"text-primary",delay:0}),r.jsx(G,{title:"On-Time Delivery",value:"94.2%",change:2.1,changeLabel:"vs last month",icon:We,iconColor:"text-green-500",delay:.1}),r.jsx(G,{title:"Stockout Risk",value:`${3.2}%`,subtitle:"Next 7 days",icon:de,iconColor:"text-amber-500",delay:.2}),r.jsx(G,{title:"Lead Time",value:"4.8 days",change:-12,changeLabel:"improvement",icon:Be,iconColor:"text-accent",delay:.3})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs(L,{title:"Supply Chain Network",subtitle:"CartoDB Dark ‚Ä¢ Real-time flow visualization",className:"lg:col-span-2",delay:.4,insight:"Plastics supplier showing 82% on-time rate. AI recommends pre-ordering 15% additional buffer stock or activating secondary supplier contract.",children:[r.jsx("div",{className:"h-[420px] rounded-lg overflow-hidden map-container",children:r.jsx(kt,{center:[49.2,9.5],zoom:7,className:"h-full w-full",nodes:Pt,flows:Nt,isSimulating:t,currentStepNodeId:t?(m=ee[a])==null?void 0:m.node:void 0,onSelectNode:o=>s(o)})}),t&&r.jsx(I.div,{className:"mt-3 p-3 rounded-lg bg-primary/10 border border-primary/20",initial:{opacity:0},animate:{opacity:1},children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative flex h-2.5 w-2.5",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-primary"})]}),r.jsxs("span",{className:"text-sm font-medium",children:["Step ",a+1,": ",(f=ee[a])==null?void 0:f.description]})]})})]}),r.jsxs(L,{title:"Supply Chain KPIs",subtitle:"Performance scorecard",delay:.5,children:[r.jsx(Z,{width:"100%",height:220,children:r.jsxs(xt,{data:Rt,children:[r.jsx(ve,{stroke:"hsl(var(--border))"}),r.jsx(ye,{dataKey:"kpi",tick:{fontSize:11,fill:"hsl(var(--muted-foreground))"}}),r.jsx(he,{angle:30,domain:[0,100],tick:{fontSize:10,fill:"hsl(var(--muted-foreground))"}}),r.jsx(W,{name:"Score",dataKey:"value",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.3,strokeWidth:2}),r.jsx(X,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",color:"hsl(var(--foreground))"}})]})}),r.jsxs("p",{className:"text-xs text-muted-foreground text-center mt-2",children:["Overall Score: ",r.jsx("span",{className:"font-semibold text-primary",children:"88.3%"})]})]})]}),r.jsx(L,{title:"Inventory Status",subtitle:"Current stock levels across categories",delay:.6,children:r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:At.map((o,c)=>r.jsxs(I.div,{className:"p-4 rounded-lg border border-border",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6+c*.1},children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:o.name}),o.status==="low"&&r.jsx(q,{status:"warning",label:"Low"})]}),r.jsx("div",{className:"text-2xl font-bold mb-2",children:o.current.toLocaleString()}),r.jsxs("div",{className:"relative h-3 rounded-full bg-muted overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-amber-500 z-10",style:{left:`${o.reorderPoint/o.max*100}%`}}),r.jsx(I.div,{className:`h-full rounded-full ${o.current>o.reorderPoint?"bg-primary":"bg-amber-500"}`,initial:{width:0},animate:{width:`${o.current/o.max*100}%`},transition:{delay:.7+c*.1,duration:.8}})]}),r.jsxs("div",{className:"flex justify-between text-[10px] text-muted-foreground mt-1",children:[r.jsx("span",{children:o.min.toLocaleString()}),r.jsxs("span",{children:["Reorder: ",o.reorderPoint.toLocaleString()]}),r.jsx("span",{children:o.max.toLocaleString()})]})]},o.name))})}),Y.length>0&&r.jsx(L,{title:"Active Disruption Alerts",subtitle:"AI-detected supply chain risks",delay:.7,children:r.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Y.map((o,c)=>r.jsx(I.div,{className:"p-4 rounded-lg border border-amber-500/30 bg-amber-500/5",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.7+c*.1},children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(de,{className:"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"font-medium text-sm",children:o.source}),r.jsx(q,{status:o.impact==="Low"?"info":"warning",label:o.impact})]}),r.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["Type: ",o.type," | ETA: ",o.eta]}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-primary",children:[r.jsx("span",{children:"AI Recommendation:"}),r.jsx("span",{className:"font-medium",children:o.action})]})]})]})},o.id))})}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsx(L,{title:"AI Demand Forecast",subtitle:"8-week prediction with confidence intervals",delay:.8,insight:"Week 6 shows 18% surge in predicted demand. AI recommends increasing production capacity by 12% starting Week 5 to meet anticipated orders.",children:r.jsx(Z,{width:"100%",height:220,children:r.jsxs(Te,{data:Ot,children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"colorPredicted",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),r.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),r.jsx(oe,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),r.jsx(se,{dataKey:"week",tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},stroke:"hsl(var(--border))"}),r.jsx(le,{tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},stroke:"hsl(var(--border))"}),r.jsx(X,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",color:"hsl(var(--foreground))"}}),r.jsx(ze,{type:"monotone",dataKey:"predicted",name:"AI Forecast",stroke:"#3b82f6",strokeWidth:2,fill:"url(#colorPredicted)"}),r.jsx(qe,{type:"monotone",dataKey:"actual",name:"Actual",stroke:"#22c55e",strokeWidth:2,dot:{fill:"#22c55e",r:4},connectNulls:!1})]})})}),r.jsx(L,{title:"Monthly Throughput",subtitle:"Inbound vs Outbound volumes",delay:.9,insight:"December peak handled successfully with 5,200 inbound units. Inventory turnover maintained at healthy 4.1x ratio.",children:r.jsx(Z,{width:"100%",height:220,children:r.jsxs(Ie,{data:Ct,children:[r.jsx(oe,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),r.jsx(se,{dataKey:"month",tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},stroke:"hsl(var(--border))"}),r.jsx(le,{tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},stroke:"hsl(var(--border))"}),r.jsx(X,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",color:"hsl(var(--foreground))"}}),r.jsx(ce,{dataKey:"inbound",name:"Inbound",fill:"#3b82f6",radius:[4,4,0,0]}),r.jsx(ce,{dataKey:"outbound",name:"Outbound",fill:"#22c55e",radius:[4,4,0,0]})]})})})]}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs(L,{title:"Supply Chain Cost Distribution",subtitle:"Monthly cost breakdown",delay:1,children:[r.jsx("div",{className:"flex items-center justify-center",children:r.jsx(Z,{width:"100%",height:180,children:r.jsxs(Ge,{children:[r.jsx(Ze,{data:te,cx:"50%",cy:"50%",innerRadius:45,outerRadius:70,paddingAngle:3,dataKey:"value",children:te.map((o,c)=>r.jsx(_e,{fill:o.color},`cell-${c}`))}),r.jsx(X,{formatter:o=>`‚Ç¨${(o/1e3).toFixed(0)}K`,contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",color:"hsl(var(--foreground))"}})]})})}),r.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:te.slice(0,4).map(o=>r.jsxs("div",{className:"flex items-center gap-1.5 text-xs",children:[r.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:o.color}}),r.jsx("span",{className:"truncate",children:o.category})]},o.category))})]}),r.jsx(L,{title:"Supplier Performance Scorecard",subtitle:"Key supplier metrics and risk assessment",className:"lg:col-span-2",delay:1.1,children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"data-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Supplier"}),r.jsx("th",{children:"On-Time Rate"}),r.jsx("th",{children:"Quality Score"}),r.jsx("th",{children:"Lead Time"}),r.jsx("th",{children:"Risk Level"})]})}),r.jsx("tbody",{children:St.map((o,c)=>r.jsxs(I.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.1+c*.1},children:[r.jsx("td",{className:"font-medium",children:o.supplier}),r.jsx("td",{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-16 h-1.5 rounded-full bg-muted overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full ${o.onTime>=90?"bg-green-500":"bg-amber-500"}`,style:{width:`${o.onTime}%`}})}),r.jsxs("span",{className:"text-xs",children:[o.onTime,"%"]})]})}),r.jsx("td",{children:r.jsxs("span",{className:"text-sm",children:[o.quality,"%"]})}),r.jsxs("td",{children:[o.leadTime," days"]}),r.jsx("td",{children:r.jsx(q,{status:o.risk==="low"?"success":o.risk==="medium"?"warning":"danger",label:o.risk})})]},o.supplier))})]})})})]})]})}export{Mt as SupplyChainTab};
